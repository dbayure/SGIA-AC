<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">
	
	

		<h:form id="form" prependId="false">
		
			<p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
 
			<p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
			    <h:graphicImage value="/resources/gfx/ajaxloaderbar.gif" />
			</p:dialog>

			<p:dialog id="dlg" header="Lecturas" widgetVar="dlgGrafica"
				modal="true" height="400">
				<p:panel id="dialogPanel" style="border: none;">

					<p:chart type="line" model="#{factorBean.animatedModel1}"
						style="width:800px;" />

					<p:commandLink action="#{placaBean.graficas}" immediate="true">
						<h:graphicImage value="/resources/gfx/Graficas.png" alt="graficas"
							height="30px" />
					</p:commandLink>
				</p:panel>
			</p:dialog>

			<p:panel id="p1" style="border: none;">
				<h:panelGrid id="gridImg" columns="10">
					<p:commandLink rendered="#{placaBean.placa.estadoAlerta != null}"
						action="#{placaBean.alertas}">
						<h:graphicImage
							value="/resources/gfx/#{placaBean.placa.estadoAlerta}.png"
							alt="placa" height="30px" />
					</p:commandLink>
					<p>
					<h3>Ip: #{placaBean.placa.ipPlaca}</h3>
					</p>
					<p:spacer width="20" height="10" />
					<p>
					<h3>Serie: #{placaBean.placa.nroSerie}</h3>
					</p>
					<p:spacer width="20" height="10" />
					<p>
					<h3>Descripci√≥n: #{placaBean.placa.descripcion}</h3>
					</p>
					<p:spacer width="20" height="10" />
					<p>
					<h3>Estado Placa: #{placaBean.placa.estado}</h3>
					</p>
					<p:spacer width="20" height="10" />
					<p:commandButton action="#{placaBean.mostrarCambioEstadoPlaca}"
						update="form" icon="ui-icon-gear" />

				</h:panelGrid>
				<h:panelGrid id="gridEstado"
					rendered="#{placaBean.mostrarCambiarEstadoPlaca}" columns="2">
					<p:selectOneButton value="#{placaBean.estadoPlaca}"
						rendered="#{request.isUserInRole('SGIADMIN')}">
						<f:selectItem itemLabel="Inactivo" itemValue="I" />
						<f:selectItem itemLabel="Configuracion" itemValue="C" />
						<f:selectItem itemLabel="Manual" itemValue="M" />
						<f:selectItem itemLabel="Automatico" itemValue="A" />
					</p:selectOneButton>
					<p:selectOneButton value="#{placaBean.estadoPlaca}"
						rendered="#{!request.isUserInRole('SGIADMIN')}">
						<f:selectItem itemLabel="Manual" itemValue="M" />
						<f:selectItem itemLabel="Automatico" itemValue="A" />
					</p:selectOneButton>
					<p:commandButton action="#{placaBean.cambiarEstadoPlaca}"
						update="form" icon="ui-icon-transferthick-e-w" />
				</h:panelGrid>

			</p:panel>
			<p:separator />

			<p:messages id="messages" showDetail="true" autoUpdate="true"
				closable="true" />
			<p:panel id="panelBotones" style="border:none;">

				<h:panelGrid id="grillaBotones" columns="6"
					style=" margin: 0 auto; text-align: center; ">

					<p:commandLink action="#{placaBean.setActuadores}" update="form">
						<h:graphicImage value="/resources/gfx/actuadores.png"
							alt="actuadores" height="150px" />
					</p:commandLink>
					<p:spacer width="100" />

					<p:commandLink action="#{placaBean.setFactores}" update="form">
						<h:graphicImage value="/resources/gfx/factores.png" alt="factores"
							height="150px" />
					</p:commandLink>
					<p:spacer width="100" />

					<p:commandLink action="#{placaBean.niveles}" immediate="true">
						<h:graphicImage value="/resources/gfx/niveles.png" alt="niveles"
							height="150px" />
					</p:commandLink>
					<p:spacer width="100" />

					<h3>Grupos de Actuadores</h3>
					<p:spacer width="100" />

					<h3>Factores</h3>
					<p:spacer width="100" />

					<h3>Niveles de Severidad</h3>
					<p:spacer width="100" />

				</h:panelGrid>

			</p:panel>

			<p:panel id="gridFactores" style="border:none;"
				rendered="#{placaBean.seleccion == 'factores'}">

				<p:panel style="border:none;">
					<p:commandLink
						style="display: block; float:right; margin-left: auto; margin-right: auto;"
						update=":form">

						<h:graphicImage value="/resources/gfx/Recargar.png" alt="recargar"
							height="25px" />
					</p:commandLink>
				</p:panel>
				<p></p>
				<p:spacer height="15"></p:spacer>

				<p:dataScroller value="#{factores}" var="_factores" chunkSize="5">
					<f:facet name="header">
						<h:outputText value="Factores" />

					</f:facet>
					<h:panelGrid columns="5"
						style=" margin-left: 10; margin-right: auto; width: 100%;">
						<h:graphicImage value="/resources/gfx/#{_factores.nombre}.png"
							alt="niveles" height="100px" width="100px"
							style=" margin-left: 50px; margin-right: inherit; vertical-align: middle;" />
						<p:spacer width="100" />
						<p:panel style="border:none;">
							<h2 style="text-align: center; vertical-align: bottom;">Lectura</h2>
							<h3 style="text-align: center; vertical-align: bottom;">#{factorBean.lecturaFactor(_factores.idFactor)}
								#{_factores.unidad}</h3>
							<h:panelGrid columns="3">
								<p:commandLink
									style="display: block; margin-left: 50px; margin-right: auto;"
									action="#{factorBean.graficarFactor(_factores.idFactor)}"
									oncomplete="PF('dlgGrafica').show()" update=":form:dlg">
									<h:graphicImage value="/resources/gfx/Graficar.png"
										alt="niveles" height="30px" />
								</p:commandLink>
								<p:spacer width="30" />
								<p:commandLink
									style="display: block; margin-left: 50px; margin-right: auto;"
									action="#{factorBean.factores}">
									<h:graphicImage value="/resources/gfx/Modificar1.png"
										alt="factores" height="30px" />
								</p:commandLink>
							</h:panelGrid>
						</p:panel>
						<p:spacer width="100" />

						<h3 style="text-align: center;">#{_factores.nombre}</h3>
					</h:panelGrid>
					<p:separator></p:separator>
				</p:dataScroller>
			</p:panel>

			<p:panel id="gridGrupoActuadores" style=" border: none;"
				rendered="#{placaBean.seleccion == 'actuadores'}">
				<p:dataScroller value="#{grupoActuadores}" var="_gruposActuadores"
					chunkSize="5">
					<f:facet name="header">
						<h:outputText value="Grupos" />
					</f:facet>
					<h:panelGrid columns="5"
						style=" margin-left: 130px; margin-right: inherit;">
						<h:graphicImage value="/resources/gfx/GrupoActuadores.png"
							alt="niveles" height="50px" width="50px"
							style=" margin-left: 30px; margin-right: inherit; vertical-align:middle;" />
						<p:spacer width="100" />
						<p:panel style="border:none;" id="panelValoresPuerto">
							<h3 style="text-align: center; vertical-align: bottom;">#{_gruposActuadores.nombre}</h3>
							<h:panelGrid id="panelPosiciones"
								rendered="#{_gruposActuadores.deAvance == 'S'}">

								<h:panelGrid id="gridMostrarPosiciones"
									rendered="#{grupoActuadoresBean.mostrarModificar == 'mostrar'}"
									columns="4">
									<h:outputText value="Posicion Actual: "
										style="font-weight: bold;" />
									<h:outputText value="#{_gruposActuadores.estado}"
										style="font-weight: bold;" />
									<p:spacer width="10" />
									<p:commandButton id="editarPosiciones" update=":form"
										icon="ui-icon-pencil"
										rendered="#{grupoActuadoresBean.mostrarModificar == 'mostrar'}"
										action="#{grupoActuadoresBean.cambiaMostrarModificar}"
										actionListener="#{grupoActuadoresBean.obtenerListaPosiciones(_gruposActuadores.id)}" />
								</h:panelGrid>

								<h:panelGrid id="gridCambiarPosiciones"
									rendered="#{grupoActuadoresBean.mostrarModificar == 'modificar'}"
									columns="3">
									<h:outputText value="Posiciones: " style="font-weight: bold;" />
									<p:spacer width="10" />
									<p:selectOneMenu id="tipoActuador" widgetVar="posicionesList"
										value="#{grupoActuadoresBean.posActual}" required="false">
										<f:selectItems
											value="#{grupoActuadoresBean.posicionesGrupoActuadorAvanceSeleccionado}"
											var="_posicion" itemLabel="#{_posicion.descripcion}"
											itemValue="#{_posicion.nroPosicion}" />
									</p:selectOneMenu>
									<p:commandButton id="modificar" update=":form"
										icon="ui-icon-check"
										rendered="#{grupoActuadoresBean.mostrarModificar == 'modificar'}"
										action="#{grupoActuadoresBean.cambiaMostrarModificar}"
										actionListener="#{grupoActuadoresBean.cambiarPosicion}" />
								</h:panelGrid>

							</h:panelGrid>

							<h:panelGrid columns="5"
								rendered="#{_gruposActuadores.deAvance == 'N'}">

								<h:panelGrid id="gridMostrarEstado"
									rendered="#{grupoActuadoresBean.mostrarEstado == 'mostrar'}"
									columns="4">
									<h:outputText value="Estado Actual: "
										style="font-weight: bold;" />
									<h:outputText value="#{_gruposActuadores.estado}"
										style="font-weight: bold;" />
									<p:spacer width="10" />
									<p:commandButton id="refrescarValor" update=":form"
										icon="ui-icon-pencil"
										rendered="#{grupoActuadoresBean.mostrarEstado == 'mostrar'}"
										action="#{grupoActuadoresBean.cambiaMostrarEstado}"
										actionListener="#{grupoActuadoresBean.setEstadoGrupo(_gruposActuadores.estado)}" />
								</h:panelGrid>

								<h:panelGrid id="gridCambiarEstado"
									rendered="#{grupoActuadoresBean.mostrarEstado == 'modificar'}"
									columns="3">
									<h:outputText value="Estados: " style="font-weight: bold;" />
									<p:spacer width="10" />
									<p:inputSwitch value="#{grupoActuadoresBean.estado}" />
									<p:commandButton id="modificarValor" update=":form"
										icon="ui-icon-check"
										rendered="#{grupoActuadoresBean.mostrarEstado == 'modificar'}"
										action="#{grupoActuadoresBean.cambiaMostrarEstado}"
										actionListener="#{grupoActuadoresBean.cambiarEstado(_gruposActuadores.id)}" />
								</h:panelGrid>

							</h:panelGrid>

						</p:panel>
						<p:spacer width="100" />
						<p:commandLink action="#{placaBean.grupos}" immediate="true">
							<h:graphicImage value="/resources/gfx/Modificar.png" alt="grupos"
								height="30px" />
						</p:commandLink>
						<h3 style="text-align: center;">#{_gruposActuadores.nombre}</h3>
					</h:panelGrid>
				</p:dataScroller>
			</p:panel>

		</h:form>

	</ui:define>
</ui:composition>