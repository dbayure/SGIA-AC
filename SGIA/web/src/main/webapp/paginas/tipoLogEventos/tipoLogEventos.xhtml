<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/default.xhtml">
	<ui:define name="content">
		<h1 style="text-align: center;">Administración de Tipos de Logs
			de Eventos</h1>


		<h:form id="form" prependId="false">

			<p:messages id="messages" showDetail="true" autoUpdate="true"
				closable="true" />


			<p:dataTable id="tipoLogEventos" var="_tipoLogEventos"
				value="#{tipoLogEventos}" editable="true">
				<f:facet name="header">  Tipos de Log de Eventos 	</f:facet>

				<p:ajax event="rowEdit" listener="#{tipoLogEventoBean.onEdit}" update=":form:messages"/>

				<p:ajax event="rowEditCancel"
					listener="#{tipoLogEventoBean.onCancel}" update=":form:messages" />

				<p:column headerText="Id" style="width:5%">
					<h:outputText value="#{_tipoLogEventos.idTipoLogEvento}" />
				</p:column>

				<p:column headerText="Nombre" style="width:40%">
					<h:outputText value="#{_tipoLogEventos.nombre}" />
				</p:column>

				<p:column headerText="Enviar SMS" style="width:15%">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="#{_tipoLogEventos.enviarSMS}" />
						</f:facet>
						<f:facet name="input">
							<p:inputText id="modelInputEnviarSMS"
								value="#{_tipoLogEventos.enviarSMS}" style="width:96%"
								required="true" />
						</f:facet>
					</p:cellEditor>
				</p:column>

				<p:column headerText="Enviar Mail" style="width:15%">
					<p:cellEditor>
						<f:facet name="output">
							<h:outputText value="#{_tipoLogEventos.enviarMail}" />
						</f:facet>
						<f:facet name="input">
							<p:inputText id="modelInputEnviarMail"
								value="#{_tipoLogEventos.enviarMail}" style="width:96%"
								required="true" />
						</f:facet>
					</p:cellEditor>
				</p:column>

				<p:column headerText="Destinatarios" style="width:20%">
					<p:cellEditor>
						<f:facet name="output">
							<p:dataList id="destinatariosTab"
								value="#{_tipoLogEventos.listaDestinatarios}"
								var="desti" type="unordered" itemType="none" paginator="false"
								rows="10">
								
								<h:outputText value="#{desti.nombre}" />
							</p:dataList>
						</f:facet>
						<f:facet name="input">
							<p:selectManyMenu id="listaDestinatarios_Mod"
								value="#{tipoLogEventoBean.listaDestinatarios}"
								converter="destinatarioConverter" showCheckbox="true">
								<f:selectItems value="#{destinatarios}" var="dest"
									itemLabel="#{dest.nombre}" itemValue="#{dest}" />

								<p:column>
									<h:outputText value="#{dest.nombre}" />
								</p:column>
							</p:selectManyMenu>
						</f:facet>
					</p:cellEditor>
				</p:column>


				<p:column style="width:3%">
					<p:rowEditor />
				</p:column>
				<!--  -->
<!-- 				<p:column style="width:3%"> -->
<!-- 					<p:commandLink id="deleteLink" update=":form" immediate="true" -->
<!-- 						ajax="true" styleClass="ui-icon ui-icon-trash" -->
<!-- 						actionListener="#{tipoLogEventoBean.eliminar(_tipoLogEventos.idTipoLogEvento)}"> -->
<!-- 					</p:commandLink> -->
<!-- 				</p:column> -->

				<p:column style="width:3%">
					<p:commandButton id="detalle" update=":form:tipoLog"
						icon="ui-icon-search" title="View"
						onclick="PF('tipoLog').show()">
						<f:setPropertyActionListener value="#{_tipoLogEventos}"
							target="#{tipoLogEventoBean.tipoLogEventoSeleccionado}" />
					</p:commandButton>

				</p:column>


			</p:dataTable>

			<br />
			<br />

<!-- rendered="#{not empty tipoLogEventoBean.tipoLogEventoSeleccionado}" -->
						<p:panel id="tipoLog" header="Detalle Log de Eventos" toggleable="true" 
							rendered="#{tipoLogEventoBean.control > 0}"
							footer="Destinatarios Asociados" style="margin-bottom:20px">
							<h:panelGrid columns="2" layout="grid">

								<p:outputLabel for="nombre" value="Nombre:" />

								<h:outputText id="nombre"
									value="#{tipoLogEventoBean.tipoLogEventoSeleccionado.nombre}"
									label="Nombre" />

								<p:outputLabel for="enviarSMS" value="Enviar SMS?:" />
								<h:outputText id="enviarSMS"
									value="#{tipoLogEventoBean.tipoLogEventoSeleccionado.enviarSMS}"
									label="Enviar SMS?" />


								<p:outputLabel for="enviarMail" value="Enviar E-Mail?:" />
								<h:outputText id="enviarMail"
									value="#{tipoLogEventoBean.tipoLogEventoSeleccionado.enviarMail}"
									label="Enviar Mail?" />

								<p:outputLabel for="destinatarios" value="Destinatarios::" />
								<p:dataList id="destinatarios"
									value="#{tipoLogEventoBean.tipoLogEventoSeleccionado.listaDestinatarios}"
									var="desti" type="unordered" itemType="none" paginator="false"
									rows="10">

									<p:commandLink update=":form:destDetail"
										styleClass="ui-icon ui-icon-search"
										oncomplete="PF('destDialog').show()" title="Ver Detalle"
										style="float:left;">
										<f:setPropertyActionListener value="#{desti}"
											target="#{tipoLogEventoBean.destinatarioSeleccionado}" />
										<h:outputText value="#{desti.idDestinatario}"
											style="text-align:left;" />
									</p:commandLink>
									<h:outputText value="#{desti.nombre}" />
								</p:dataList>
							</h:panelGrid>
							
<!-- 							<p:commandButton id="detalle" update=":form:tipoLog" -->
<!-- 								icon="ui-icon-circle-triangle-n" title="View"> -->
<!-- 								<f:setPropertyActionListener value="0" -->
<!-- 											target="#{tipoLogEventoBean.control}" /> -->
<!-- 							</p:commandButton> -->
						</p:panel>
					

			<p:dialog header="Destinatario Info" widgetVar="destDialog"
				modal="true" showEffect="blind" resizable="false">
				<p:outputPanel id="destDetail" style="text-align:center;">
						<h:panelGrid columns="2">

							<f:facet name="header">
								<h:outputText
									value="#{tipoLogEventoBean.destinatarioSeleccionado.nombre}" />
							</f:facet>

							<h:outputText value="Celular:" />
							<h:outputText
								value="#{tipoLogEventoBean.destinatarioSeleccionado.celular}" />

							<h:outputText value="Mail" />
							<h:outputText
								value="#{tipoLogEventoBean.destinatarioSeleccionado.mail}" />

							<h:outputText value="Hora Mínima" />
							<h:outputText
								value="#{tipoLogEventoBean.destinatarioSeleccionado.horaMin}" />

							<h:outputText value="Hora Máxima" />
							<h:outputText
								value="#{tipoLogEventoBean.destinatarioSeleccionado.horaMax}" />

						</h:panelGrid>
				</p:outputPanel>
			</p:dialog>



							
<!-- 			<p:panel id="modificar" header="Modificar Log de Eventos" -->
<!-- 				rendered="#{tipoLogEventoBean.control > 0}"> -->


<!-- 			<h:panelGrid columns="2"> -->

<!-- 				<p:outputLabel for="nombre_Mod" value="Nombre:" /> -->
<!-- 				<p:inputText id="nombre_Mod" -->
<!-- 					value="#{tipoLogEventoBean.tipoLogEventoSeleccionado.nombre}" -->
<!-- 					label="Nombre" required="true" /> -->

<!-- 				<p:outputLabel for="enviarSMS_Mod" value="Enviar SMS?:" /> -->
<!-- 				<p:selectOneMenu id="enviarSMS_Mod" -->
<!-- 					value="#{tipoLogEventoBean.tipoLogEventoSeleccionado.enviarSMS}"> -->
<!-- 					<f:selectItem itemLabel="Si" itemValue="S" /> -->
<!-- 					<f:selectItem itemLabel="No" itemValue="N" /> -->
<!-- 				</p:selectOneMenu> -->

<!-- 				<p:outputLabel for="enviarMail_Mod" value="Enviar E-Mail?:" /> -->
<!-- 				<p:selectOneMenu id="enviarMail_Mod" -->
<!-- 					value="#{tipoLogEventoBean.tipoLogEventoSeleccionado.enviarMail}"> -->
<!-- 					<f:selectItem itemLabel="Si" itemValue="S" /> -->
<!-- 					<f:selectItem itemLabel="No" itemValue="N" /> -->
<!-- 				</p:selectOneMenu> -->


<!-- 				<p:outputLabel for="listaDestinatarios_Mod" -->
<!-- 					value="Lista Destinatarios:" /> -->
<!-- 				<p:selectManyMenu id="listaDestinatarios_Mod" -->
<!-- 					value="#{tipoLogEventoBean.listaDestinatarios}" -->
<!-- 					converter="destinatarioConverter" showCheckbox="true"> -->
<!-- 					<f:selectItems value="#{destinatarios}" var="dest" -->
<!-- 						itemLabel="#{dest.nombre}" itemValue="#{dest}" /> -->

<!-- 					<p:column> -->
<!-- 						<h:outputText value="#{dest.nombre}" /> -->
<!-- 					</p:column> -->
<!-- 				</p:selectManyMenu> -->

				

<!-- 			</h:panelGrid> -->
			
<!-- 			<p> -->
<!-- 					<h:commandButton id="botMod" update=":form:tipoLogEventos" -->
<!-- 						action="#{tipoLogEventoBean.modificar()}" value="Modificar" -->
						
<!-- 						style="margin-left: 400px;" > -->
<!-- 						<f:setPropertyActionListener value="0" -->
<!-- 										target="#{tipoLogEventoBean.control}" /> -->
<!-- 					</h:commandButton> -->
<!-- 				</p> -->


<!-- 			</p:panel> -->
		</h:form>
	</ui:define>
</ui:composition>
